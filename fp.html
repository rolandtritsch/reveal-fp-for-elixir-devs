<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Functional Refactoring for Elixir Developers</title>
<meta name="author" content="(Roland Tritsch)"/>
<style type="text/css">
.underline { text-decoration: underline; }
</style>
<link rel="stylesheet" href="https://revealjs.com/css/reveal.css"/>

<link rel="stylesheet" href="https://revealjs.com/css/theme/black.css" id="theme"/>


<!-- If the query includes 'print-pdf', include the PDF print sheet -->
<script>
    if( window.location.search.match( /print-pdf/gi ) ) {
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = 'https://revealjs.com/css/print/pdf.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
    }
</script>
</head>
<body>
<div class="reveal">
<div class="slides">

<section>
<section id="slide-orgb10d6e0">
<h2 id="orgb10d6e0">Functional Refactoring for Elixir Developers</h2>
<p>
Roland Tritsch
roland@tritsch.org
</p>

<p>
www.tritsch.org
www.tedn.life
</p>

<p>
@innolocity
@TheExtremeDigitalNomad
</p>

</section>
</section>
<section>
<section id="slide-orgb6ebb48">
<h2 id="orgb6ebb48">Disclaimer</h2>
<p>
<img src="./images/disclaimer.png" alt="disclaimer.png" />
<i>Image credits: <a href="http://www.tritsch.org/2019/04/06/small-things.html">Roland - FP fan boy</a></i>
</p>

</section>
</section>
<section>
<section id="slide-org6adea73">
<h2 id="org6adea73">Quote</h2>
<p>
<code>If debugging is the process of removing software bugs, then programming must be the process of putting them in.</code>
<i>Source: Edsger Dijkstra</i>
</p>

</section>
</section>
<section>
<section id="slide-orgcd37c1d">
<h2 id="orgcd37c1d">Quote</h2>
<p>
<code>Reading these books probably won't change your code overnight. Some people call it **general abstract nonsense** for a reason. That said, it does provide a nice framework for thinking about these abstract ideas, and is a recommended pursuit for all that are curious.</code>
<i>Source: <a href="https://github.com/witchcrafters/witchcraft#prior-art-and-further-reading%22">Witchcraft - Brooklyn Zelenka</a></i>
</p>

</section>
</section>
<section>
<section id="slide-orgd5db198">
<h2 id="orgd5db198">Bio, <a href="http://www.tritsch.org/about">I am</a> a/the &#x2026;</h2>
<div class="outline-text-2" id="text-orgd5db198">
</div>
</section>
<section id="slide-org9416790">
<h3 id="org9416790">CTO @ Leprechaun Solutions</h3>
</section>
<section id="slide-org22b7f45">
<h3 id="org22b7f45">Principal Engineer @ Community</h3>
</section>
<section id="slide-orge0071f8">
<h3 id="orge0071f8">Software Engineer, Engineering Manager, Hubby, Papa, &#x2026;</h3>
</section>
<section id="slide-org1c147d2">
<h3 id="org1c147d2">Builder and runner of functional teams and functional systems</h3>
</section>
<section id="slide-orgbffed4d">
<h3 id="orgbffed4d">Explorer of <a href="https://www.instagram.com/theextremedigitalnomad">extreme digital nomading</a> and of remote-first cultures</h3>
</section>
<section id="slide-orged7742e">
<h3 id="orged7742e">&#x2026; a <a href="http://howrolandrolls.com">Wave</a> <b>?!?!</b></h3>

</section>
</section>
<section>
<section id="slide-orga4a5ea6">
<h2 id="orga4a5ea6">Community</h2>
<div class="outline-text-2" id="text-orga4a5ea6">
</div>
</section>
<section id="slide-org218f89d">
<h3 id="org218f89d"><b>Fostering more meaningful conversations (again).</b> Between &#x2026;</h3>
<div class="outline-text-3" id="text-org218f89d">
</div>
</section>
<section id="slide-orga143d1f">
<h4 id="orga143d1f">Artists and Fans. Activists and Change Agents. Thoughtleaders and &#x2026;</h4>
</section>
<section id="slide-orgbdef9bc">
<h4 id="orgbdef9bc"><a href="https://twitter.com/theellenshow/status/1190341840962113536">Ellen DeGeneres</a>. Jennifer Lopez. Marshmello. Mark Cuban. &#x2026;</h4>
</section>
<section id="slide-org1f53ba5">
<h3 id="org1f53ba5">Founded in 2018. Based in LA/USA (and 5 more timezones). Remote-Also.</h3>
</section>
<section id="slide-orgb0e610f">
<h3 id="orgb0e610f">Shared-Nothing Micro-Services Architecture (using an event-bus for state propagation)</h3>
</section>
<section id="slide-org6a6b42c">
<h3 id="org6a6b42c">React frontend. Elixir backend. MySql/Vitess database(s). RabbitMQ messaging</h3>

</section>
</section>
<section>
<section id="slide-org47cdea3">
<h2 id="org47cdea3">Functional Programming</h2>
<p>
<code>... a style of building the structure and elements of computer programs, that treats computation as the evaluation of mathematical functions and avoids changing-state and mutable data. It is a declarative programming paradigm, which means programming is done with expressions or declarations instead of statements.</code>
<i>Source: <a href="https://en.wikipedia.org/wiki/Functional_programming">Wikipedia</a></i>
</p>

</section>
</section>
<section>
<section id="slide-orgff1e662">
<h2 id="orgff1e662">Functional Programming&lt;/h2&gt;</h2>
<div class="outline-text-2" id="text-orgff1e662">
</div>
</section>
<section id="slide-org015f09e">
<h3 id="org015f09e"><b>Declarative (like SQL). Describing what (data) you want (not how to get it (algorithms))</b></h3>
</section>
<section id="slide-orgcac087e">
<h3 id="orgcac087e">Pure functions (with no side-effects). Immutable datastructures (that are lazy)</h3>
<div class="outline-text-3" id="text-orgcac087e">
</div>
</section>
<section id="slide-org4b2f754">
<h4 id="org4b2f754">pure functions + immutable data = referential transparency</h4>
</section>
<section id="slide-orgb5a98e4">
<h3 id="orgb5a98e4">Higher Order Functions (functions as parameters). Lambdas. Composeability. Currying</h3>
</section>
<section id="slide-org767df9e">
<h3 id="org767df9e">Category Theory. Type-Classes (Functor, Applicative, Monad). Data-Types (IO, Option, Either, Try, &#x2026;)</h3>
</section>
<section id="slide-org779583b">
<h3 id="org779583b">Haskell. Scala(z). Kotlin(Arrow). Clojure. F#. &#x2026; Erlang. Elixir</h3>
<p>
<code>Less code that is easier/faster to change/test and cheaper to own/maintain (harder to break; more up-time; more velocity).</code>
</p>

</section>
</section>
<section>
<section id="slide-org2ef59cf">
<h2 id="org2ef59cf">Quote</h2>
<p>
<img src="https://scalerablog.files.wordpress.com/2015/10/44b0bd758f8ee5c81362923f0d5c8e017c9ddf623925e60c29a4c015b89fbb45.jpg" alt="44b0bd758f8ee5c81362923f0d5c8e017c9ddf623925e60c29a4c015b89fbb45.jpg" />
<i>Source: MemeGenerator.net</i>
</p>

</section>
</section>
<section>
<section id="slide-org223a779">
<h2 id="org223a779">Monads</h2>
<p>
<code>... a monad is a design pattern that allows structuring programs generically while automating away boilerplate code needed by the program logic.</code>
<i>Source: <a href="https://en.wikipedia.org/wiki/Monad_(functional_programming)%22">Wikipedia</a></i>
</p>

</section>
</section>
<section>
<section id="slide-orge3d6574">
<h2 id="orge3d6574">Monads</h2>
<p>
<code>Whatever language or default programming paradigm a developer uses, following the monad pattern brings many of the benefits of purely functional programming. By reifying a specific kind of computation, a monad not only encapsulates the tedious details of that computational pattern, but it does so in a declarative way, improving the code's clarity.</code>
<i>Source: <a href="https://en.wikipedia.org/wiki/Monad_(functional_programming)">Wikipedia</a></i>
</p>

</section>
</section>
<section>
<section id="slide-org627891f">
<h2 id="org627891f">Monads</h2>
<div class="outline-text-2" id="text-org627891f">
</div>
</section>
<section id="slide-orga667808">
<h3 id="orga667808">Wrappers/containers (with some special properties/context)</h3>
</section>
<section id="slide-org8fb9d4c">
<h3 id="org8fb9d4c">Functors (&lt;$&gt;). Applicatives (&lt;*&gt;). Monads (&gt;&gt;=)</h3>
</section>
<section id="slide-orgd6d288c">
<h3 id="orgd6d288c">Lists. Options. Futures. &#x2026;</h3>
</section>
<section id="slide-org9f54cdc">
<h3 id="org9f54cdc">Monad. MonadEx. Towel. Witchcraft. &#x2026;</h3>

</section>
</section>
<section>
<section id="slide-org331dbed">
<h2 id="org331dbed">(Live) Coding :) &#x2026;</h2>
<div class="outline-text-2" id="text-org331dbed">
</div>
</section>
<section id="slide-orge7c1ac5">
<h3 id="orge7c1ac5">Maybe - Another way to deal with <b>Nothing</b></h3>
</section>
<section id="slide-org63c77da">
<h3 id="org63c77da">Monad - On a scratch pad</h3>
</section>
<section id="slide-org9df9737">
<h3 id="org9df9737">Writer/Error - Logging on steroids</h3>

</section>
</section>
<section>
<section id="slide-org960f598">
<h2 id="org960f598">Maybe</h2>
<div class="outline-text-2" id="text-org960f598">
</div>
</section>
<section id="slide-org895ae94">
<h3 id="org895ae94">Problem: Too many problems :) &#x2026;</h3>
<div class="outline-text-3" id="text-org895ae94">
</div>
</section>
<section id="slide-org124aca5">
<h4 id="org124aca5">Cheat: Include the problem in the solution domain</h4>
</section>
<section id="slide-org495bd42">
<h4 id="org495bd42">Make it natural to &lt;em&gt;handle&lt;/em&gt; the problem</h4>
</section>
<section id="slide-org98c1ad0">
<h4 id="org98c1ad0"><b>Just</b> pattern matching on steroids</h4>

</section>
</section>
<section>
<section id="slide-org66300f2">
<h2 id="org66300f2">Code</h2>
<p>
~
  defmodule Witchcraft.Tutorial.First do
     def run(initial, multiplicator, divisor) do
       initial |&gt; mul_by(multiplicator) |&gt; div_by(divisor) |&gt; IO.inspect()
     end
</p>

<p>
     defp mul_by(thiz, thaz), do: thiz * thaz
     defp div_by(thiz, thaz), do: thiz / thaz
   end
~
</p>

</section>
</section>
<section>
<section id="slide-orga5dd894">
<h2 id="orga5dd894">Code</h2>
<p>
~
   defmodule Witchcraft.Tutorial.With do
     def run(initial, multiplicator, divisor) do
       with result &lt;- mul_by(initial, multiplicator),
            {:ok, result1} &lt;- div_by(result, divisor)
       do
         IO.inspect(result1)
       else
         {:error, :div_by_zero} -&gt; IO.puts("Error: Div by 0")
         {:error, _} -&gt; IO.puts("Error: Unknown")
       end
     end
</p>

<p>
     defp mul_by(thiz, thaz), do: thiz * thaz
     defp div_by(_thiz, thaz) when thaz == 0, do: {:error, :div_by_zero}
     defp div_by(thiz, thaz), do: {:ok, thiz / thaz}
   end
~
</p>
</section>
</section>
<section>
<section id="slide-orgecf290d">
<h2 id="orgecf290d">Code</h2>
<p>
~
  defmodule Witchcraft.Tutorial.Maybe do
     alias Algae.Maybe
     alias Algae.Maybe.{Just, Nothing}
</p>

<p>
def run(initial, multiplicator, divisor) do
  Maybe.new(initial) |&gt; mul_by(Maybe.new(multiplicator)) |&gt; div_by(Maybe.new(divisor)) |&gt; IO.inspect()
end
</p>

<p>
defp mul_by(_thiz, %Nothing{} = _thaz), do: Maybe.new()
defp mul_by(%Nothing{} = _thiz, _thaz), do: Maybe.new()
defp mul_by(%Just{just: thiz}, %Just{just: thaz}), do: Maybe.new(thiz * thaz)
</p>

<p>
     defp div_by(_thiz, %Nothing{} = _thaz), do: Maybe.new()
     defp div_by(%Nothing{} = _thiz, _thaz), do: Maybe.new()
     defp div_by(_thiz, %Just{just: 0}), do: Maybe.new()
     defp div_by(%Just{just: thiz}, %Just{just: thaz}), do: Maybe.new(thiz / thaz)
   end
~
</p>
</section>
</section>
<section>
<section id="slide-org0b6b5d5">
<h2 id="org0b6b5d5">Monad</h2>
<div class="outline-text-2" id="text-org0b6b5d5">
</div>
</section>
<section id="slide-org4f858ec">
<h3 id="org4f858ec">Problem: Say pattern &#x2026;</h3>
<div class="outline-text-3" id="text-org4f858ec">
</div>
</section>
<section id="slide-org374d75a">
<h4 id="org374d75a">Don't lose you mind :) &#x2026;</h4>
</section>
<section id="slide-orgc22d761">
<h4 id="orgc22d761">Function composition (on steroids)</h4>
</section>
<section id="slide-org6591cb4">
<h4 id="org6591cb4">Bind, pipe, &#x2026; with a context (Maybe, List, Writer, &#x2026;)</h4>

</section>
</section>
<section>
<section id="slide-org1d15e6b">
<h2 id="org1d15e6b">Quote</h2>
<p>
<img src="https://pbs.twimg.com/media/CgKyXAHWEAA8oYo.jpg" alt="CgKyXAHWEAA8oYo.jpg" />
<i>Source: MemeGenerator.net</i>
</p>

</section>
</section>
<section>
<section id="slide-org5df233d">
<h2 id="org5df233d">Code</h2>
<p>
~
     f = fn x -&gt; x + 3 end
     ff = fn x -&gt; x * 3 end
     fff = fn x -&gt; [x * 3] end
</p>

<p>
2 |&gt; f.()
[1, 2, 3] |&gt; Enum.map(f)
</p>

<p>
[1, 2, 3] |&gt; Functor.map(f)
%{a: 1, b: 2, c: 3} |&gt; Functor.map(f)
</p>

<p>
[1, 2, 3] ~&gt; f
%{a: 1, b: 2, c: 3} ~&gt; f
</p>

<p>
[1, 2, 3] ~&gt;&gt; [f, ff]
</p>

<p>
[1, 2, 3] ~&gt; f
[1, 2, 3] ~&gt; f ~&gt; ff
</p>

<p>
     [1, 2, 3] &gt;&gt;&gt; fff
~
</p>
</section>
</section>
<section>
<section id="slide-orge1cdd34">
<h2 id="orge1cdd34">Writer/Error</h2>
<div class="outline-text-2" id="text-orge1cdd34">
</div>
</section>
<section id="slide-org63bb2e5">
<h3 id="org63bb2e5">Problem: Unstructured logging/error handling</h3>
<div class="outline-text-3" id="text-org63bb2e5">
</div>
</section>
<section id="slide-orgec23e19">
<h4 id="orgec23e19">Too many log entries</h4>
</section>
<section id="slide-org14d61ad">
<h4 id="org14d61ad">Losing the power of the pipe</h4>
</section>
<section id="slide-org93514f3">
<h4 id="org93514f3">Monads - Reader. Writer. State</h4>

</section>
</section>
<section>
<section id="slide-orga15f0a3">
<h2 id="orga15f0a3">Code</h2>
<p>
~
    defmodule Witchcraft.Tutorial.Second do
      def double(n), do: n * 2
</p>

<p>
def run(n) do
  d = &amp;double/1
</p>

<p>
        n |&gt; d.() |&gt; d.() |&gt; IO.inspect()
      end
    end
~
</p>
</section>
</section>
<section>
<section id="slide-org266d3d8">
<h2 id="org266d3d8">Code</h2>
<p>
~
      defmodule Witchcraft.Tutorial.Stacktrace do
        def bad_double(n) do
          IO.puts("Current #{n}")
          n * 2
        end
</p>

<p>
def double({n, log}), do: {n * 2, log &lt;&gt; "Current #{n} - "}
</p>

<p>
def run(n) do
  d = &amp;double/1
</p>

<p>
          {n, ""} |&gt; d.() |&gt; d.() |&gt; IO.inspect()
        end
      end
~
</p>
</section>
</section>
<section>
<section id="slide-orgc7ca4da">
<h2 id="orgc7ca4da">Code</h2>
<p>
~
      defmodule Witchcraft.Tutorial.Writer do
        use Witchcraft
        alias Algae.Writer
</p>

<p>
def double(n) do
  monad Writer.new(0, "") do
    Writer.tell "Double #{n} - "
    return n * 2
  end
end
</p>

<p>
def triple(n) do
  monad Writer.new(0, "") do
    Writer.tell "Triple #{n} - "
    return n * 3
  end
end
</p>

<p>
def run(n) do
  d = &amp;double/1
  t = &amp;triple/1
</p>

<p>
n |&gt; d.() &gt;&gt;&gt; d &gt;&gt;&gt; d &gt;&gt;&gt; t |&gt; Writer.run() |&gt; IO.inspect()
</p>

<p>
        end
      end
~
</p>
</section>
</section>
<section>
<section id="slide-orga1da434">
<h2 id="orga1da434">Nomads</h2>

<div class="figure">
<p><a href="https://www.instagram.com/theextremedigitalnomad%22"><img src="./images/nomad.png" alt="nomad.png" /></a>
</p>
</div>

</section>
</section>
<section>
<section id="slide-orge5b8dfe">
<h2 id="orge5b8dfe">TL;DR</h2>
<div class="outline-text-2" id="text-orge5b8dfe">
</div>
</section>
<section id="slide-org9d0aab1">
<h3 id="org9d0aab1">Knowing about FP concepts <i>can</i> make you a better software engineer</h3>
</section>
<section id="slide-org86046b6">
<h3 id="org86046b6">Applying FP concepts to your code base <i>can</i> make your code base easier (and less expensive) to own/maintain</h3>
</section>
<section id="slide-org9936dbf">
<h3 id="org9936dbf">Let's go all-in on this (just kidding :))</h3>

</section>
</section>
<section>
<section id="slide-orga378b7d">
<h2 id="orga378b7d">Q&amp;A</h2>

</section>
</section>
<section>
<section id="slide-orga934dcb">
<h2 id="orga934dcb">Resources</h2>
<div class="outline-text-2" id="text-orga934dcb">
</div>
</section>
<section id="slide-org2618cb5">
<h3 id="org2618cb5"><a href="https://www.youtube.com/watch?v=I8LbkfSSR58">Category Theory - Bartosz Milewski</a></h3>
</section>
<section id="slide-org484f493">
<h3 id="org484f493"><a href="http://adit.io/posts/2013-04-17-functors,_applicatives,_and_monads_in_pictures.html">Monads - Adit</a></h3>
</section>
<section id="slide-org3ce7b09">
<h3 id="org3ce7b09"><a href="https://www.youtube.com/watch?v=psdG5iV57q0">Witchcraft - Witchcrafters</a></h3>
</section>
</section>
</div>
</div>
<script src="https://revealjs.com/js/reveal.js"></script>

<script>
// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({
multiplex: {
    secret: '', // null if client
    id: '', // id, obtained from socket.io server
    url: '' // Location of socket.io server
},

// Optional libraries used to extend on reveal.js
dependencies: [
 { src: 'https://revealjs.com/lib/js/classList.js', condition: function() { return !document.body.classList; } },
 { src: 'https://revealjs.com/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: 'https://revealjs.com/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: 'https://revealjs.com/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
 { src: 'https://revealjs.com/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }]
});
</script>
</body>
</html>
